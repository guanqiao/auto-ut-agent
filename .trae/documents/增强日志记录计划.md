## 增强日志记录计划

### 目标
为 LLM 和 Agent 相关核心功能添加详细的日志记录，包括：
- 关键操作的开始/完成日志
- 详细的调试信息
- 异常信息完整输出到日志

### 修改文件清单

#### 1. LLM 模块

**pyutagent/llm/client.py**
- 添加 `__init__` 初始化日志（endpoint, model, ca_cert 等配置）
- `generate()` 方法：输入/输出长度、耗时日志
- `agenerate()` 方法：异步调用日志
- `test_connection()` 方法：连接测试详细日志
- `complete()` 方法：消息数量、响应长度日志
- 所有异常捕获处添加 `logger.exception()` 输出完整堆栈

**pyutagent/llm/config.py**
- `LLMConfig` 创建/序列化日志
- `LLMConfigCollection` 添加/删除/更新配置日志

#### 2. Agent 模块

**pyutagent/agent/react_agent.py**
- `__init__` 初始化组件日志
- `generate_tests()` 主流程：步骤开始/结束、迭代次数日志
- `_execute_step()` 每个 action 的执行日志
- `_analyze_error()` 错误分析日志
- `stop()` / `reset()` 操作日志

**pyutagent/agent/base_agent.py**
- 状态变更日志
- 进度更新日志

**pyutagent/agent/actions.py**
- 每个 action 的执行前/后日志
- Action 参数和结果日志

**pyutagent/agent/retry_manager.py**
- 重试开始/结束日志
- 重试次数、延迟日志
- 重试策略调整日志

**pyutagent/agent/error_recovery.py**
- 错误恢复开始/结束日志
- 错误分类日志
- 恢复策略选择日志

#### 3. Tools 模块

**pyutagent/tools/aider_integration.py**
- AiderCodeFixer 初始化日志
- `fix_compilation_errors()` / `fix_test_failures()` 日志
- Architect/Editor 模式调用日志
- 多文件编辑日志

**pyutagent/tools/maven_tools.py**
- Maven 命令执行日志
- 编译/测试结果解析日志
- 覆盖率分析日志

#### 4. UI 模块

**pyutagent/ui/dialogs/llm_config_dialog.py**
- 配置加载/保存日志
- 测试连接详细日志（包括异常堆栈）

**pyutagent/ui/main_window.py**
- 项目打开日志
- 测试生成请求日志
- Agent 工作线程启动/停止日志

### 日志级别规划

| 级别 | 使用场景 |
|------|----------|
| DEBUG | 详细参数、中间结果、调用链 |
| INFO | 关键操作开始/完成、状态变更 |
| WARNING | 可恢复的错误、降级处理 |
| ERROR | 操作失败、异常捕获 |
| EXCEPTION | 完整异常堆栈 |

### 日志格式示例

```python
logger.info(f"[LLM] 开始生成 - Model: {self.model}, Prompt长度: {len(prompt)}")
logger.debug(f"[LLM] 请求参数 - Temperature: {self.temperature}, MaxTokens: {self.max_tokens}")

try:
    result = await self._generate(...)
    logger.info(f"[LLM] 生成完成 - 响应长度: {len(result)}, 耗时: {elapsed:.2f}s")
except Exception as e:
    logger.exception(f"[LLM] 生成失败 - Error: {e}")
    raise
```

请确认此计划后，我将开始实施具体的代码修改。