# Python UT Agent - 对话式 Agent UI 架构

## 核心特性

### 1. 对话式交互
- 自然语言命令: "生成 UserService 的测试"
- 控制命令: "暂停", "继续", "查看状态"
- 流式响应显示

### 2. 向量存储
- sqlite-vec (纯 Python, 无需编译)
- 存储: 测试模式、源代码、错误修复记录

### 3. Agent 能力
- ReAct 规划模式
- 工具调用: 解析Java、运行Maven、向量检索
- 暂停/恢复状态控制

### 4. UI 布局
```
┌──────────┬──────────────┬──────────┐
│ 文件树    │   对话区域    │ 可视化面板│
│          │  - 消息历史   │ - 进度   │
│          │  - 输入框     │ - 覆盖率 │
│          │  - 快捷按钮   │ - 代码   │
└──────────┴──────────────┴──────────┘
```

## 依赖（纯Python）
```
PyQt6==6.8.0
tree-sitter==0.23.0
langchain==0.3.0
sqlite-vec==0.1.0
sentence-transformers==3.2.0
```

## TDD 开发计划

| 阶段 | 内容 | 天数 |
|------|------|------|
| 1 | sqlite-vec 向量存储 | 0.5 |
| 2 | 记忆系统（工作/短期/长期） | 1 |
| 3 | Java/Maven 工具 | 1 |
| 4 | Agent 核心（ReAct） | 1.5 |
| 5 | 对话管理器 | 0.5 |
| 6 | 暂停/恢复功能 | 0.5 |
| 7 | Chat UI 组件 | 1 |
| 8 | 主窗口集成 | 0.5 |
| 9 | 可视化面板 | 0.5 |
| 10 | 集成测试 | 0.5 |

总计: 7.5 天

确认后开始 TDD 开发。